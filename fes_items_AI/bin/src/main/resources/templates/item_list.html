<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>持ち物一覧</title>

	<link rel="stylesheet" th:href="@{/css/item_list.css}">
	<script th:src="@{/js/item_list.js}" defer></script>

</head>

<body>
	<div class="logo-container">
		<img src="/images/logo.png" alt="ロゴ" class="logo-image">
	</div>


	<div class="content-wrapper">
		<h2>FES もちものリスト</h2>
		<p class="hello-message" th:text="${'こんにちは！'+session.loginUser.name + 'さん！'}"></p>

		<p th:if="${message}" th:text="${message}" class="success-message"></p>


		<form th:action="@{/item/list}" method="get" class="filter-form">
			<label>フェス名：</label>
			<select name="festivalId" class="select">
				<option value="">----------選択----------</option>
				<option th:each="festival: ${festivalList}" th:value="${festival.id}" th:text="${festival.fesName}"
					th:selected="${festival.id==selectedFestivalId}"></option>
			</select>
			<label>カテゴリ：</label>
			<select name="category" class="select">
				<option value="">-----選択-----</option>
				<option value="必需品">必需品</option>
				<option value="貴重品">貴重品</option>
				<option value="化粧品">化粧品</option>
				<option value="日用品">日用品</option>
				<option value="電子機器">電子機器</option>
				<option value="食品">食品</option>
				<option value="書類">書類</option>
			</select>


			<button type="submit" class="search-btn">検索</button>
			<a th:href="@{/item/list}" class="reset-btn">リセット</a>
		</form>

		<div class="item-list">
			<div th:each="item,iterStat : ${itemList}" class="item-card">

				<p><strong>NO : </strong><span th:text="${iterStat.index+1}"></span></p>
				<p><strong>フェス名 : </strong><span th:text="${item.festivalName}"></span></p>
				<p><strong>持ち物 : </strong><span th:text="${item.itemName}"></span></p>
				<p><strong>カテゴリ : </strong><span th:text="${item.category}"></span>
				<p><strong>数量 : </strong><span th:text="${item.quantity}"></span>

				<p class="action-buttons">
					<strong>操作 :</strong>
					<a th:href="@{/item/edit/{id}(id=${item.id})}">編集</a>
					<a th:href="@{'/item/delete/' +${item.id}}" onclick="return confirm('削除しますか？')">削除</a>
				</p>

			</div>
		</div>


		<!-- ページネーションリンク -->
		<div class="pagination-area">
			<div class="pagination">
				<span th:each="pageNum : ${#numbers.sequence(1, totalPages)}">
					<a th:href="@{|/item/list?page=${pageNum}|}" th:text="${pageNum}"
						th:classappend="${pageNum == currentPage} ? 'active' : ''">1</a>
				</span>
			</div>

			<a th:href="@{/item/new}" class="add-item-btn">新規持ち物登録</a>
		</div>


	</div>

	<a th:href="@{/memo/list}" class="fes-memo-btn">FES MEMO</a>
	<a th:href="@{/logout}" class="logout-btn">ログアウト</a>
</body>

</html>