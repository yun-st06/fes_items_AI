<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>FESメモ一覧</title>
  <link rel="stylesheet" href="/css/memo.css" />
</head>
<body>

  <div class="logo-container"><img src="/images/logo.png" class="logo-image" alt="" /></div>

     <h2 class="form-title">FES MEMO</h2>
  <div class="canvas-wrapper">
	   

	  
    <div class="form-box">
     
      <div class="header-btns">
        <a class="btn btn-primary" th:href="@{/memo/new}">MEMO作成</a>
        <a class="btn btn-plain" th:href="@{/item/list}">持ち物リストへ</a>
      </div>
	  
	  <p th:if="${message}" th:text="${message}" class="success-message"></p>

      <!-- ▼ ① 白い枠の中だけスクロールさせるコンテナ -->
      <div class="memo-scroll">
        <div th:each="m : ${memos}" class="memo-card">
          <div class="memo-head">
            <div class="memo-body">
              <!-- タイトル（年＋フェス名） -->
              <div class="memo-meta">
                <span th:text="${m.memoYear}">2025</span>年
                <span th:text="${m.festivalName}">FUJI ROCK FESTIVAL</span>
              </div>

              <!-- ③ 本文は入力がある時だけ表示し、中身をちゃんと出す -->
              <div class="memo-text"
                   th:if="${m.memoText != null and !#strings.isEmpty(m.memoText)}"
                   th:text="${m.memoText}">本文</div>
            </div>

            <!-- 画像はパスがある時だけ -->
            <div class="memo-img" th:if="${m.imagePath != null and !#strings.isEmpty(m.imagePath)}">
              <img th:src="${m.imagePath}" alt="image" />
            </div>
          </div>

          <div class="memo-actions">
            <!-- ルーティングのスラッシュ抜け修正 -->
            <a th:href="@{'/memo/edit/' + ${m.id}}" class="btn btn-link">編集</a>
            <form th:action="@{'/memo/delete/' + ${m.id}}" method="post"
                  onsubmit="return confirm('削除しますか？');">
              <button type="submit" class="btn btn-danger">削除</button>
            </form>
          </div>
        </div>
      </div>
      <!-- ▲ スクロール領域ここまで -->

    </div>
  </div>
  <a th:href="@{/logout}" class="logout-btn">ログアウト</a>
  
</body>
</html>